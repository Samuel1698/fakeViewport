!function(){"use strict";var e=[,function(e,t,n){n.r(t),n.d(t,{colorLogEntry:function(){return g},fetchAndDisplayLogs:function(){return p},initLogs:function(){return h},startLogsAutoRefresh:function(){return l},stopLogsAutoRefresh:function(){return c}});var a=n(2);let s,o=0,r=50;const i=100,d=2500;function l(e=5e3){s||(s=setInterval((()=>{m()&&p(r)}),e))}function c(){clearInterval(s),s=null}function u(e){const t=document.getElementById("logsPaused");t&&(t.hidden=!e)}function m(){const e=document.getElementById("logs"),t=document.getElementById("logOutput"),n=!!e&&!e.hasAttribute("hidden"),a=t.scrollHeight-t.scrollTop-t.clientHeight<40,s=Date.now()-o<d;return u(!a||s),n&&a&&!s}function g(e,t){const n=t||document.createElement("div");let a=e.trim();n.classList.remove("Green","Blue","Yellow","Red");const s=a.toLowerCase();if(s.includes("healthy")||s.includes("resumed")||s.includes("reloaded")||s.includes("fullscreen activated")||s.includes("saved")||s.includes("gracefully shutting down")||s.includes("already running")||s.includes("no errors found")||s.includes("started")?n.classList.add("Green"):s.includes("[warning]")||s.includes("=====")||s.includes("chromedriver ")||s.includes("geckodriver ")||s.includes("response is 200")||s.includes("WebDriver version")||s.includes("download new driver")||s.includes("version")||s.includes("getting latest")||s.includes("^^")||s.includes("get ")?n.classList.add("Yellow"):s.includes("[info]")?n.classList.add("Blue"):n.classList.add("Red"),t){const e=a.match(/^.*?\[(INFO|ERROR|WARNING|DEBUG)\]\s*/);e&&(a=a.substring(e[0].length))}return n.textContent=a,n}async function p(e,t=!0){const n=document.getElementById("logCount"),s=document.getElementById("logLimit"),o=document.getElementById("logOutput"),d=void 0!==e?e:r,l=Math.max(10,Math.min(1e3,parseInt(d)||50));r=l,s.value=l,n.textContent=l;const c=await(0,a.fetchJSON)(`/api/logs?limit=${l}`);c?.data?.logs&&(o.innerHTML="",c.data.logs.forEach((e=>{const t=g(e);t.classList.add("log-entry"),o.appendChild(t)}))),t&&o.children.length<=i&&(o.scrollTop=o.scrollHeight)}function h(){const e=document.getElementById("searchLogs"),t=document.getElementById("logLimit"),n=document.querySelector(".log-controls");document.querySelectorAll(".custom-spinner-btn").forEach((e=>{e.addEventListener("click",(()=>{const n=parseInt(t.step)||10;let a=parseInt(t.value)||r;a="increment"===e.dataset.action?Math.min(1e3,a+n):Math.max(10,a-n),t.value=a,t.dispatchEvent(new Event("input"))}))})),e.addEventListener("click",(async()=>{await p(t.value)})),t.addEventListener("keypress",(async e=>{"Enter"===e.key&&await p(t.value)})),t.addEventListener("blur",(()=>{let e=parseInt(t.value)||r;e=Math.max(10,Math.min(1e3,e)),t.value=e,document.getElementById("logCount").textContent=e,r=e})),t.addEventListener("input",(()=>{let e=parseInt(t.value)||r;document.getElementById("logCount").textContent=Math.min(1e3,e)})),n&&["input","keydown","mousedown","touchstart"].forEach((e=>n.addEventListener(e,(()=>{o=Date.now(),u(!0)})))),document.getElementById("logOutput").addEventListener("scroll",(()=>u(!m())));const a=document.getElementById("expandLogs"),s=document.getElementById("logs");a&&s&&a.addEventListener("click",(()=>{s.classList.toggle("expanded");const e=s.classList.contains("expanded");a.setAttribute("aria-expanded",e),a.setAttribute("aria-label",e?"Collapse logs":"Expand logs"),a.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),a.click())}))})),p(r)}},function(e,t,n){n.r(t),n.d(t,{activeTab:function(){return r},configCache:function(){return d},fetchJSON:function(){return i},loadDeviceData:function(){return g},loadInfo:function(){return p},loadStatus:function(){return m},setActiveTab:function(){return h}});var a=n(3),s=n(1);let o=null,r="status";async function i(e){try{const t=await fetch(e);return t.ok?await t.json():null}catch{return null}}let d={data:null,lastUpdated:0,ttl:36e5,async get(e=!1){const t=Date.now();return(e||!this.data||t-this.lastUpdated>this.ttl)&&(this.data=await i("/api/config"),this.lastUpdated=t,this.updateConfigElements()),this.data},updateConfigElements(){if(!this.data?.data)return;const e=this.data.data,t=e?.general?.health_interval_sec?Math.round(e.general.health_interval_sec/60):null,n=(e,t)=>{const n=`${e} Second${1!==e?"s":""}`;return"waitTime"===t.id&&(e<=10||e>=120?t.classList.add("Red"):e<30||e>90?t.classList.add("Yellow"):e>30?t.classList.add("Green"):t.classList.add("Blue")),n},a=(e,n)=>{const a=`${e} Minute${1!==e?"s":""}`;return"healthInterval"===n.id&&(e<=1||e>=20)?n.classList.add("Red"):"healthInterval"===n.id&&(e<3||e>15)?n.classList.add("Yellow"):"healthInterval"===n.id&&5==e?n.classList.add("Blue"):"logInterval"===n.id&&t&&e<t?n.classList.add("Red"):"logInterval"===n.id&&60==e?n.classList.add("Blue"):"logInterval"===n.id&&(e<30||e>120)?n.classList.add("Yellow"):n.classList.add("Green"),a},s=(e,t)=>{const n=`${e} Day${1!==e?"s":""}`;return e>14?t.classList.add("Yellow"):"logDays"===t.id&&7==e?t.classList.add("Blue"):t.classList.add("Green"),n},o=(e,t)=>{const n=e?"Yes":"No";return"headless"===t.id&&e?t.classList.add("Red"):"logFile"===t.id&&!e||"logConsole"===t.id&&!e||"errorLogging"===t.id&&e||"debugLogging"===t.id&&e||"screenshots"===t.id&&e?t.classList.add("Yellow"):t.classList.add("Blue"),n},r=e=>{const t=(e||"").toLowerCase();return t.includes("chromium")?"chromium":t.includes("chrome")?"chrome":t.includes("firefox")?"firefox":"other"},i=e?.browser?.profile_path||"",d=e?.browser?.binary_path||"",l=r(i),u=r(d),m="other"!==l&&"other"!==u&&l!==u;[{id:"healthInterval",path:"general.health_interval_sec",format:(e,t)=>a(Math.round(e/60),t)},{id:"waitTime",path:"general.wait_time_sec",format:(e,t)=>n(e,t)},{id:"maxRetries",path:"general.max_retries",format:(e,t)=>(t.classList.add(e<3?"Red":e>=6?"Yellow":"Green"),`${e} Attempts`)},{id:"restartTimes",path:"general.restart_times",format:(e,t)=>(null===e||Array.isArray(e)&&0===e.length?t.classList.add("Blue"):t.classList.add("Green"),Array.isArray(e)?e.join(", "):"-")},{id:"scheduledRestart",path:"general.next_restart",format:(e,t)=>{if(!e)return t.parentElement?.setAttribute("hidden",""),"-";const n=new Date(e),a=new Date,s=(n.getTime()-a.getTime())/36e5;return t.classList.remove("Yellow","Green","Red"),s<=1&&t.classList.add("Yellow"),t.parentElement?.removeAttribute("hidden"),c.format(n).replace(/, /g," ")}},{id:"profilePath",path:"browser.profile_path",format:(e,t)=>{if(!e)return t.classList.remove("Green","Red","Yellow"),"-";return e.toLowerCase().includes("your-user")?t.classList.add("Yellow"):m||"other"===l?t.classList.add("Red"):t.classList.add("Green"),e}},{id:"profileBinary",path:"browser.binary_path",format:(e,t)=>{if(!e)return t.classList.remove("Green","Red","Yellow"),"-";return e.toLowerCase().includes("your-user")?t.classList.add("Yellow"):m||"other"===u?t.classList.add("Red"):t.classList.add("Green"),e}},{id:"headless",path:"browser.headless",format:(e,t)=>o(e,t)},{id:"logFile",path:"logging.log_file_flag",format:(e,t)=>o(e,t)},{id:"logConsole",path:"logging.log_console_flag",format:(e,t)=>o(e,t)},{id:"debugLogging",path:"logging.debug_logging",format:(e,t)=>o(e,t)},{id:"errorLogging",path:"logging.error_logging",format:(e,t)=>o(e,t)},{id:"screenshots",path:"logging.ERROR_PRTSCR",format:(e,t)=>o(e,t)},{id:"logDays",path:"logging.log_days",format:(e,t)=>s(e,t)},{id:"logInterval",path:"logging.log_interval_min",format:(e,t)=>a(e,t)}].forEach((({id:t,path:n,format:a})=>{const s=document.getElementById(t);if(!s)return;s.classList.remove("Blue","Yellow","Red");const o=n.split(".").reduce(((e,t)=>e?.[t]),e);null!=o?s.textContent=a?a(o,s):o.toString():(s.textContent="-",s.classList.add("Blue"))}))}};function l(e){const t=Math.floor(e/86400),n=Math.floor(e%86400/3600),a=Math.floor(e%3600/60),s=Math.floor(e%60),o=[];return t>0&&o.push(`${t}d`),n>0&&o.push(`${n}h`),a>0&&o.push(`${a}m`),s>0&&o.push(`${s}s`),o.length>0?o.join(" "):"0s"}const c=new Intl.DateTimeFormat("en-US",{month:"short",day:"2-digit",year:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1});function u(e){return e<1024?`${e.toFixed(1)} B/s`:e<1048576?`${(e/1024).toFixed(1)} KB/s`:`${(e/1048576).toFixed(1)} MB/s`}async function m(){const e=document.getElementById("logEntry"),t=[i("/api/script_uptime"),i("/api/status"),i("/api/system_info")];null!==e.offsetParent&&t.push(i("/api/logs?limit=1"));const[n,a,r,...d]=await Promise.all(t),c=d[0],m=document.getElementById("scriptUptime");if(!0===n?.data?.running){const e=n.data.uptime;m.classList.remove("Green","Red"),null!==o&&e===o?(m.textContent="Not Running",m.classList.add("Red")):(m.textContent=l(e),m.classList.add("Green")),o=e}else m.textContent="Not Running",m.classList.add("Red"),o=null;const g=document.getElementById("statusMsg");if(a?.data&&g){let e=a.data.status.trim();const t=e.toLowerCase();g.classList.remove("Green","Yellow","Blue","Red"),t.includes("healthy")||t.includes("resumed")||t.includes("restart")||t.includes("fullscreen restored")||t.includes("fullscreen activated")||t.includes("saved")?g.classList.add("Green"):t.includes("killed process")||t.includes("stopped")||t.includes("loaded")||t.includes("deleted old")||t.includes("starting")?g.classList.add("Blue"):t.includes("paused")||t.includes("issue")||t.includes("restarting")||t.includes("retrying")||t.includes("couldn't")||t.includes("download slow")||t.includes("restoration failed")?g.classList.add("Yellow"):(t.includes("crashed")||t.includes("unsupported browser")||t.includes("error")||t.includes("download stuck")||t.includes("page timed")||t.includes("failed to start")||t.includes("restoration failed")||t.includes("click failed")||t.includes("offline")||t.includes("to display")||t.includes("unresponsive")||t.includes("not found"))&&g.classList.add("Red"),g.textContent=e}if(r?.data){const e=document.getElementById("systemUptime");e&&(e.textContent=l(r.data.system_uptime));const t=document.getElementById("up"),n=document.getElementById("down");if(r?.data?.network?.primary_interface){const e=r.data.network.primary_interface,a=u(e.upload),s=u(e.download);t.textContent=a,n.textContent=s}}c?.data?.logs&&c.data.logs.length>0&&(0,s.colorLogEntry)(c.data.logs[0],e)}async function g(){try{const{current:e,latest:t}=await(0,a.loadUpdateData)(),n=document.getElementById("version"),s=function(e,t){const n=e.split(".").map(Number),a=t.split(".").map(Number);return a[0]>n[0]?"major":a[1]>n[1]?"minor":a[2]>n[2]?"patch":"current"}(e,t);switch(n.textContent=`${e}`,n.classList.remove("Green","Yellow","Red"),s){case"current":default:n.classList.add("Green");break;case"patch":n.classList.add("Yellow");break;case"minor":case"major":n.classList.add("Red")}}catch(e){console.error("Failed to load version info:",e)}const e=await i("/api/system_info");if(e?.data){const t=document.getElementById("osInfo"),n=document.getElementById("hardwareInfo"),a=document.getElementById("cpuInfo"),s=document.getElementById("ramInfo"),o=document.getElementById("diskInfo");if(t&&(t.textContent=e.data.os_name),n&&(n.textContent=e.data.hardware_model),e?.data?.disk_available&&(o.textContent=e.data.disk_available,o.classList.remove("Green","Yellow","Red"),e.data.disk_bytes<209715200?o.classList.add("Red"):e.data.disk_bytes<1073741824?o.classList.add("Yellow"):o.classList.add("Green")),e?.data?.cpu?.percent){const t=e.data.cpu.percent;a.textContent=`${t}%`,a.classList.remove("Green","Yellow","Red"),t<=35?a.classList.add("Green"):t<=60?a.classList.add("Yellow"):a.classList.add("Red")}if(e?.data?.memory?.percent){const t=(e.data.memory.used/1024**3).toFixed(1),n=(e.data.memory.total/1024**3).toFixed(1),a=e.data.memory.percent;s.textContent=`${t} GiB / ${n} GiB`,s.classList.remove("Green","Yellow","Red"),a<=35?s.classList.add("Green"):a<=60?s.classList.add("Yellow"):s.classList.add("Red")}}}async function p(e={}){const{forceRefreshConfig:t=!1}=e;"status"===r?await m():"device"===r?await g():"config"===r&&await d.get(t)}function h(e){r=e,"status"===r&&p()}},function(e,t,n){n.r(t),n.d(t,{CACHE_TTL:function(){return s},applyUpdate:function(){return l},checkForUpdate:function(){return c},initUpdateButton:function(){return u},loadUpdateData:function(){return i},showChangelog:function(){return d}});var a=n(2);const s=9e5;let o={timestamp:0,data:null};function r(e,t){const n=e.split(".").map(Number),a=t.split(".").map(Number);for(let e=0,t=Math.max(n.length,a.length);e<t;e++){const t=n[e]||0,s=a[e]||0;if(t>s)return 1;if(t<s)return-1}return 0}async function i(){const e=Date.now();if(o.data&&e-o.timestamp<s)return o.data;const[t,n]=await Promise.all([(0,a.fetchJSON)("/api/update"),fetch("/api/update/changelog").then((e=>e.json()))]);if(!t?.data)throw new Error("Failed to fetch version info");if("ok"!==n.status)throw new Error("Failed to fetch changelog");const{current:r,latest:i}=t.data,{changelog:d,release_url:l}=n.data;return o={timestamp:e,data:{current:r,latest:i,changelog:d,releaseUrl:l}},o.data}function d(){const e=o.data;if(!e)return void console.error("No update data; did you call checkForUpdate()?");const{latest:t,changelog:n,releaseUrl:a}=e,s=document.querySelector("#update h2");t.includes("failed-to-fetch")?s.textContent="Failed to Fetch Changelog":s.textContent=`Release v${t}`;const r=document.getElementById("changelog-body");r.innerHTML=marked.parse(n);const i=document.createElement("div");i.className="headingWrapper";const d=Array.from(r.children),l=d.findIndex((e=>"H3"===e.tagName));if(l>=0){d.slice(0,l);r.insertBefore(i,d[l]);d.slice(l).filter((e=>"H3"===e.tagName)).forEach(((e,t)=>{const n=document.createElement("div");n.className="headingGroup";const a=[e];let s=e.nextElementSibling;for(;s&&"H3"!==s.tagName;)a.push(s),s=s.nextElementSibling;a.forEach((e=>n.appendChild(e))),i.appendChild(n)}))}document.getElementById("changelog-link").href=a,document.getElementById("update").removeAttribute("hidden")}async function l(e){const t=document.querySelector("#updateMessage span"),n=e.querySelector("span").textContent,a=e.disabled;t.textContent="",t.className="",e.disabled=!0,t.textContent="Fetching Update...",t.classList.add("Green");try{const{current:s,latest:o}=await i();if(r(o,s)<=0)return t.textContent="✓ Your system is already up to date",t.classList.add("Green"),e.querySelector("span").textContent="Up to date",e.disabled=!0,void setTimeout((()=>{t.textContent="",t.className=""}),5e3);t.textContent="Fetching Update...",t.classList.add("Green");const d=await fetch("/api/update/apply",{method:"POST"});if(!d.ok)throw new Error(`Update failed with status ${d.status}`);const l=await d.json(),c=l?.data?.outcome||l?.outcome;if("already-current"===c)return t.textContent="✓ Your system is already up to date",t.classList.remove("Red"),t.classList.add("Green"),e.querySelector("span").textContent="Up to date",void setTimeout((()=>{e.querySelector("span").textContent=n,e.disabled=a,t.textContent="",t.className=""}),1e4);if(!c.startsWith("updated-to-"))throw"update-failed"===c?new Error("Update process failed"):new Error("Unexpected update response");t.textContent="✓ Update successful, preparing to restart...",t.classList.remove("Red"),t.classList.add("Green");try{const[n,a]=await Promise.all([fetch("/api/control/restart",{method:"POST"}),fetch("/api/self/restart",{method:"POST"})]);if(!n.ok||!a.ok)throw new Error("Restart commands failed");const[s,o]=await Promise.all([n.json(),a.json()]);"ok"===s.status&&"ok"===o.status?(t.textContent="✓ System restarting...",setTimeout((()=>location.reload()),5e3)):(t.textContent="✓ Update complete - please restart manually",e.querySelector("span").textContent="Restart required")}catch(n){t.textContent="✓ Update complete - automatic restart failed",e.querySelector("span").textContent="Restart required",console.error("Restart failed:",n)}}catch(n){console.error("Update failed:",n),t.classList.remove("Green"),t.classList.add("Red"),n.message.includes("Failed to fetch")?t.textContent="✗ Network error - please check your connection":n.message.includes("Update process failed")?t.textContent="✗ Update failed - please try again":t.textContent="✗ Update error - please check logs",e.querySelector("span").textContent="Retry",e.disabled=!1}}async function c(){try{const{current:e,latest:t}=await i(),n=document.getElementById("updateBtn"),a=document.querySelector('#update button[type="submit"]');if(r(t,e)<=0)return n&&n.setAttribute("hidden",""),void(a&&(a.disabled=!0,a.querySelector("span").textContent="Up to date"));n&&n.removeAttribute("hidden"),a&&(a.disabled=!1,a.querySelector("span").textContent="Apply Update")}catch(e){console.error("Update check failed:",e)}}function u(){const e=document.querySelector('#update button[type="submit"]');e&&(e.addEventListener("click",(()=>l(e))),e.disabled=!0,e.querySelector("span").textContent="Checking...")}},function(e,t,n){n.r(t),n.d(t,{scheduleRefresh:function(){return d}});var a=n(2),s=n(3);let o=null;const r={status:5e3,device:5e3,config:s.CACHE_TTL,desktop:5e3};function i(e){switch(e){case"status":(0,a.loadStatus)();break;case"device":(0,a.loadDeviceData)();break;case"config":a.configCache.get();break;case"desktop":(0,a.loadStatus)(),(0,a.loadDeviceData)()}}function d(e,{immediate:t=!0}={}){clearInterval(o);const n=r[e];n&&(t&&i(e),o=setInterval((()=>i(e)),n))}},function(e,t,n){n.r(t),n.d(t,{control:function(){return o}});var a=n(1),s=n(6);async function o(e){const t=document.querySelectorAll(".statusMessage span");t.forEach((e=>{e.textContent="",e.classList.remove("Green","Red")}));try{const n=await fetch(`/api/control/${e}`,{method:"POST"}),o=await n.json();"ok"===o.status?t.forEach((e=>{e.textContent="✓ "+o.message,e.classList.add("Green")})):t.forEach((e=>{e.textContent="✗ "+o.message,e.classList.add("Red")})),(0,s.isDesktopView)()&&"quit"!=e&&((0,a.stopLogsAutoRefresh)(),(0,a.startLogsAutoRefresh)(1e3)),setTimeout((()=>{t.forEach((t=>{t.textContent="",t.classList.remove("Green","Red"),(0,s.isDesktopView)()&&"quit"!=e&&((0,a.stopLogsAutoRefresh)(),(0,a.startLogsAutoRefresh)())}))}),15e3)}catch(e){t.forEach((t=>{t.textContent="✗ "+e,t.classList.add("Red")}))}}},function(e,t,n){n.r(t),n.d(t,{buttons:function(){return d},controls:function(){return l},initSections:function(){return h},isDesktopView:function(){return u},sections:function(){return i},toggleSection:function(){return p}});var a=n(1),s=n(2),o=n(3),r=n(4);const i={status:document.getElementById("status"),device:document.getElementById("device"),config:document.getElementById("config"),logs:document.getElementById("logs"),updateBanner:document.getElementById("update")},d={status:document.getElementById("statusBtn"),device:document.getElementById("deviceBtn"),config:document.getElementById("configBtn"),logs:document.getElementById("logsBtn"),updateBanner:document.getElementById("updateBtn"),refreshButton:document.getElementById("refreshButton"),logInput:document.querySelector("#navigation .log-controls")},l=document.getElementById("controls"),c=document.querySelector(".group");function u(){return window.matchMedia("(min-width: 58.75rem)").matches}function m(){const e=Object.entries(d).find((([e,t])=>"true"===t.getAttribute("aria-selected")))?.[0];u()?"config"===e||"updateBanner"===e?c.setAttribute("hidden","true"):(c.removeAttribute("hidden"),p("status"),g()):(c.removeAttribute("hidden"),"status"===e&&p("status"))}function g(){i.status.removeAttribute("hidden"),i.device.removeAttribute("hidden"),i.logs.removeAttribute("hidden"),d.logInput.removeAttribute("hidden")}function p(e){!u()||"device"!==e&&"logs"!==e||(e="status"),Object.values(i).forEach((e=>{e.setAttribute("hidden","")})),i[e].removeAttribute("hidden"),Object.entries(d).forEach((([t,n])=>{n.setAttribute("aria-selected",t===e?"true":"false")})),"status"===e||"device"===e||"config"===e?d.refreshButton.removeAttribute("hidden"):d.refreshButton.setAttribute("hidden","true"),"status"!==e&&"device"!==e?l.setAttribute("hidden","true"):l.removeAttribute("hidden"),"logs"===e?d.logInput.removeAttribute("hidden"):d.logInput.setAttribute("hidden","true"),u()?"config"===e||"updateBanner"===e?c.setAttribute("hidden","true"):(c.removeAttribute("hidden"),g()):c.removeAttribute("hidden");const t=u()&&["status","device","logs"].includes(e)?"desktop":e;(0,r.scheduleRefresh)(t,{immediate:!1})}function h(){i.status.removeAttribute("hidden"),i.device.setAttribute("hidden",""),i.logs.setAttribute("hidden",""),i.updateBanner.setAttribute("hidden",""),d.status.setAttribute("aria-selected","true"),d.device.setAttribute("aria-selected","false"),d.logs.setAttribute("aria-selected","false"),d.updateBanner.setAttribute("aria-selected","false"),d.refreshButton.removeAttribute("hidden"),d.status.addEventListener("click",(()=>{p("status"),(0,s.setActiveTab)("status")})),d.device.addEventListener("click",(()=>{p(u()?"status":"device"),(0,s.setActiveTab)("device")})),d.config.addEventListener("click",(()=>{p("config"),(0,s.setActiveTab)("config")})),d.logs.addEventListener("click",(async()=>{p(u()?"status":"logs"),await(0,a.fetchAndDisplayLogs)()})),d.updateBanner.addEventListener("click",(()=>{p("updateBanner"),(0,o.showChangelog)()})),d.refreshButton.addEventListener("click",(()=>{(0,s.loadInfo)({forceRefreshConfig:!0}),u()&&"status"===s.activeTab&&(0,a.fetchAndDisplayLogs)(),d.refreshButton.classList.add("refreshing"),setTimeout((()=>{d.refreshButton.classList.remove("refreshing")}),1e3)})),window.matchMedia("(min-width: 58.75rem)").addEventListener("change",m),m()}}],t={};function n(a){var s=t[a];if(void 0!==s)return s.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,n),o.exports}n.d=function(e,t){for(var a in t)n.o(t,a)&&!n.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var a={};!function(){n.r(a);var e=n(1),t=n(4),s=n(2),o=n(3),r=n(5),i=n(6);document.addEventListener("DOMContentLoaded",(async()=>{if(document.getElementById("themeToggle").addEventListener("click",(()=>{const e=document.documentElement,t="light"===e.getAttribute("data-theme")?"dark":"light";e.setAttribute("data-theme",t),localStorage.setItem("theme",t)})),"undefined"!=typeof window){const e=localStorage.getItem("theme");e&&document.documentElement.setAttribute("data-theme",e)}document.querySelectorAll("[data-tooltip]").forEach((e=>{if(e.parentElement?.classList.contains("tooltip"))return;const t=e.getAttribute("data-tooltip"),n=e.className.split(" ").filter((e=>e)),a=t.split("|").map((e=>e.trim())).filter(Boolean),s=document.createElement("div");if(s.className="tooltip-text",s.setAttribute("role","tooltip"),a.length>0){const e=document.createElement("span");e.className="Blue",e.textContent=a[0],s.appendChild(e)}for(let e=1;e<a.length;e++){s.appendChild(document.createElement("br"));const t=document.createElement("span");t.textContent=a[e],e==a.length-1&&a.length>2&&(t.className="Yellow"),s.appendChild(t)}1===a.length&&(s.querySelector(".Blue").style.display="block");const o=document.createElement("span");o.className="tooltip",n.forEach((e=>{"tooltip-trigger"!==e&&o.classList.add(e)})),e.parentNode.insertBefore(o,e),e.classList.add("tooltip-trigger"),e.setAttribute("tabindex","-1"),e.setAttribute("aria-describedby",`tooltip-${Date.now()}`),s.id=e.getAttribute("aria-describedby"),o.appendChild(e),o.appendChild(s),e.addEventListener("touchstart",(t=>{t.preventDefault(),document.querySelectorAll(".tooltip-trigger").forEach((t=>{t!==e&&t.classList.remove("active")})),e.classList.toggle("active")}))})),document.addEventListener("touchstart",(e=>{e.target.closest(".tooltip-trigger")||document.querySelectorAll(".tooltip-trigger").forEach((e=>{e.classList.remove("active")}))}));if(window.location.pathname.includes("login.html")||"/login"===window.location.pathname||document.getElementById("login"))return;(0,i.initSections)(),await Promise.all([(0,s.loadStatus)(),(0,s.loadDeviceData)(),s.configCache.get(!0)]),(0,e.initLogs)(),(0,o.checkForUpdate)(),(0,o.initUpdateButton)(),(0,e.startLogsAutoRefresh)(),setInterval(o.checkForUpdate,o.CACHE_TTL),(0,t.scheduleRefresh)((0,i.isDesktopView)()?"desktop":"status",{immediate:!1});const n=document.getElementById("controls"),a=n.parentElement,d=n.querySelectorAll("button"),l=n.getAttribute("data-tooltip");d.forEach((e=>{e.addEventListener("click",(async()=>{d.forEach((e=>{e.setAttribute("disabled",""),e.classList.add("processing")})),n.setAttribute("data-tooltip","Processing command..."),a.classList.add("show");try{await(0,r.control)(e.dataset.action,e)}catch(e){console.error("Control action failed:",e),n.setAttribute("data-tooltip","Action failed. "+(e.message||""))}finally{setTimeout((()=>{d.forEach((e=>{e.removeAttribute("disabled"),e.classList.remove("processing")})),a.classList.remove("show"),n.setAttribute("data-tooltip",l)}),15e3)}}))}));const c=document.querySelector("button.hide-panel"),u=document.querySelector(".status-device"),m=document.getElementById("logs");c&&u&&(c.addEventListener("click",(()=>{u.classList.toggle("contracted"),m.classList.toggle("expanded"),m.parentElement.classList.toggle("expanded");const e=u.classList.contains("contracted");c.setAttribute("aria-expanded",e),c.parentElement.querySelector(".tooltip-text span").textContent=e?"Show Panel":"Hide Panel";const t=c.parentElement.querySelector("svg");t&&(t.classList=e?"rotated":"")})),c.addEventListener("keydown",(e=>{"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),c.click())})))}))}()}();